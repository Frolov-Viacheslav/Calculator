#!groovy
// Ждет окончания предыдущей сборки (нельзя несколько одновременно)
properties([disableConcurrentBuilds()]) 
pipeline {
 agent { label 'slave01' }
 options {
   // Выводить в логе сборки время каждой операции
   timestamps() 
  }
  stages {
       stage('launch slave') {
      steps {
            sh 'rm -r Calculator'
            build 'Dev_master'
      }
    }
    stage('Copy Archive') {
         steps {
             script {
                 step ([$class: 'CopyArtifact',
                 projectName: '/home/jenkins/Calculator',
                 filter: "target/Calculator*.jar",
                 target: '/var/jenkins_home/Test_Copy_Artifact']);
             }
         }
     }
  }
  
}
